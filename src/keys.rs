use termion::event::Key;

pub trait NewFromString {
    fn new_from_string(s: &str) -> Key;
}

impl NewFromString for Key {
    fn new_from_string(s: &str) -> Key {
        let processed = s.replace("<", "").replace(">", "").to_lowercase();
        let words: Vec<&str> = processed.split("-").collect();
        match &words[..] {
            ["esc"] => Key::Esc,
            ["null"] => Key::Null,
            ["backspace"] => Key::Backspace,
            ["left"] => Key::Left,
            ["right"] => Key::Right,
            ["up"] => Key::Up,
            ["down"] => Key::Down,
            ["home"] => Key::Home,
            ["end"] => Key::End,
            ["pageup"] => Key::PageUp,
            ["pagedown"] => Key::PageDown,
            ["backtab"] => Key::BackTab,
            ["delete"] => Key::Delete,
            ["insert"] => Key::Insert,
            ["f1"] => Key::F(1),
            ["f2"] => Key::F(2),
            ["f3"] => Key::F(3),
            ["f4"] => Key::F(4),
            ["f5"] => Key::F(5),
            ["f6"] => Key::F(6),
            ["f7"] => Key::F(7),
            ["f8"] => Key::F(8),
            ["f9"] => Key::F(9),
            ["f10"] => Key::F(10),
            ["f11"] => Key::F(11),
            ["f12"] => Key::F(12),
            ["a"] => Key::Char('a'),
            ["b"] => Key::Char('b'),
            ["c"] => Key::Char('c'),
            ["d"] => Key::Char('d'),
            ["e"] => Key::Char('e'),
            ["f"] => Key::Char('f'),
            ["g"] => Key::Char('g'),
            ["h"] => Key::Char('h'),
            ["i"] => Key::Char('i'),
            ["j"] => Key::Char('j'),
            ["k"] => Key::Char('k'),
            ["l"] => Key::Char('l'),
            ["m"] => Key::Char('m'),
            ["n"] => Key::Char('n'),
            ["o"] => Key::Char('o'),
            ["p"] => Key::Char('p'),
            ["q"] => Key::Char('q'),
            ["r"] => Key::Char('r'),
            ["s"] => Key::Char('s'),
            ["t"] => Key::Char('t'),
            ["u"] => Key::Char('u'),
            ["v"] => Key::Char('v'),
            ["w"] => Key::Char('w'),
            ["x"] => Key::Char('x'),
            ["y"] => Key::Char('y'),
            ["z"] => Key::Char('z'),
            ["s", "a"] => Key::Char('A'),
            ["s", "b"] => Key::Char('B'),
            ["s", "c"] => Key::Char('C'),
            ["s", "d"] => Key::Char('D'),
            ["s", "e"] => Key::Char('E'),
            ["s", "f"] => Key::Char('F'),
            ["s", "g"] => Key::Char('G'),
            ["s", "h"] => Key::Char('H'),
            ["s", "i"] => Key::Char('I'),
            ["s", "j"] => Key::Char('J'),
            ["s", "k"] => Key::Char('K'),
            ["s", "l"] => Key::Char('L'),
            ["s", "m"] => Key::Char('M'),
            ["s", "n"] => Key::Char('N'),
            ["s", "o"] => Key::Char('O'),
            ["s", "p"] => Key::Char('P'),
            ["s", "q"] => Key::Char('Q'),
            ["s", "r"] => Key::Char('R'),
            ["s", "s"] => Key::Char('S'),
            ["s", "t"] => Key::Char('T'),
            ["s", "u"] => Key::Char('U'),
            ["s", "v"] => Key::Char('V'),
            ["s", "w"] => Key::Char('W'),
            ["s", "x"] => Key::Char('X'),
            ["s", "y"] => Key::Char('Y'),
            ["s", "z"] => Key::Char('Z'),
            ["a", "a"] => Key::Alt('a'),
            ["a", "b"] => Key::Alt('b'),
            ["a", "c"] => Key::Alt('c'),
            ["a", "d"] => Key::Alt('d'),
            ["a", "e"] => Key::Alt('e'),
            ["a", "f"] => Key::Alt('f'),
            ["a", "g"] => Key::Alt('g'),
            ["a", "h"] => Key::Alt('h'),
            ["a", "i"] => Key::Alt('i'),
            ["a", "j"] => Key::Alt('j'),
            ["a", "k"] => Key::Alt('k'),
            ["a", "l"] => Key::Alt('l'),
            ["a", "m"] => Key::Alt('m'),
            ["a", "n"] => Key::Alt('n'),
            ["a", "o"] => Key::Alt('o'),
            ["a", "p"] => Key::Alt('p'),
            ["a", "q"] => Key::Alt('q'),
            ["a", "r"] => Key::Alt('r'),
            ["a", "s"] => Key::Alt('s'),
            ["a", "t"] => Key::Alt('t'),
            ["a", "u"] => Key::Alt('u'),
            ["a", "v"] => Key::Alt('v'),
            ["a", "w"] => Key::Alt('w'),
            ["a", "x"] => Key::Alt('x'),
            ["a", "y"] => Key::Alt('y'),
            ["a", "z"] => Key::Alt('z'),
            ["a", "s", "a"] => Key::Alt('A'),
            ["a", "s", "b"] => Key::Alt('B'),
            ["a", "s", "c"] => Key::Alt('C'),
            ["a", "s", "d"] => Key::Alt('D'),
            ["a", "s", "e"] => Key::Alt('E'),
            ["a", "s", "f"] => Key::Alt('F'),
            ["a", "s", "g"] => Key::Alt('G'),
            ["a", "s", "h"] => Key::Alt('H'),
            ["a", "s", "i"] => Key::Alt('I'),
            ["a", "s", "j"] => Key::Alt('J'),
            ["a", "s", "k"] => Key::Alt('K'),
            ["a", "s", "l"] => Key::Alt('L'),
            ["a", "s", "m"] => Key::Alt('M'),
            ["a", "s", "n"] => Key::Alt('N'),
            ["a", "s", "o"] => Key::Alt('O'),
            ["a", "s", "p"] => Key::Alt('P'),
            ["a", "s", "q"] => Key::Alt('Q'),
            ["a", "s", "r"] => Key::Alt('R'),
            ["a", "s", "s"] => Key::Alt('S'),
            ["a", "s", "t"] => Key::Alt('T'),
            ["a", "s", "u"] => Key::Alt('U'),
            ["a", "s", "v"] => Key::Alt('V'),
            ["a", "s", "w"] => Key::Alt('W'),
            ["a", "s", "x"] => Key::Alt('X'),
            ["a", "s", "y"] => Key::Alt('Y'),
            ["a", "s", "z"] => Key::Alt('Z'),
            ["c", "a"] => Key::Ctrl('a'),
            ["c", "b"] => Key::Ctrl('b'),
            ["c", "c"] => Key::Ctrl('c'),
            ["c", "d"] => Key::Ctrl('d'),
            ["c", "e"] => Key::Ctrl('e'),
            ["c", "f"] => Key::Ctrl('f'),
            ["c", "g"] => Key::Ctrl('g'),
            ["c", "h"] => Key::Ctrl('h'),
            ["c", "i"] => Key::Ctrl('i'),
            ["c", "j"] => Key::Ctrl('j'),
            ["c", "k"] => Key::Ctrl('k'),
            ["c", "l"] => Key::Ctrl('l'),
            ["c", "m"] => Key::Ctrl('m'),
            ["c", "n"] => Key::Ctrl('n'),
            ["c", "o"] => Key::Ctrl('o'),
            ["c", "p"] => Key::Ctrl('p'),
            ["c", "q"] => Key::Ctrl('q'),
            ["c", "r"] => Key::Ctrl('r'),
            ["c", "s"] => Key::Ctrl('s'),
            ["c", "t"] => Key::Ctrl('t'),
            ["c", "u"] => Key::Ctrl('u'),
            ["c", "v"] => Key::Ctrl('v'),
            ["c", "w"] => Key::Ctrl('w'),
            ["c", "x"] => Key::Ctrl('x'),
            ["c", "y"] => Key::Ctrl('y'),
            ["c", "z"] => Key::Ctrl('z'),
            ["c", "s", "a"] => Key::Ctrl('A'),
            ["c", "s", "b"] => Key::Ctrl('B'),
            ["c", "s", "c"] => Key::Ctrl('C'),
            ["c", "s", "d"] => Key::Ctrl('D'),
            ["c", "s", "e"] => Key::Ctrl('E'),
            ["c", "s", "f"] => Key::Ctrl('F'),
            ["c", "s", "g"] => Key::Ctrl('G'),
            ["c", "s", "h"] => Key::Ctrl('H'),
            ["c", "s", "i"] => Key::Ctrl('I'),
            ["c", "s", "j"] => Key::Ctrl('J'),
            ["c", "s", "k"] => Key::Ctrl('K'),
            ["c", "s", "l"] => Key::Ctrl('L'),
            ["c", "s", "m"] => Key::Ctrl('M'),
            ["c", "s", "n"] => Key::Ctrl('N'),
            ["c", "s", "o"] => Key::Ctrl('O'),
            ["c", "s", "p"] => Key::Ctrl('P'),
            ["c", "s", "q"] => Key::Ctrl('Q'),
            ["c", "s", "r"] => Key::Ctrl('R'),
            ["c", "s", "s"] => Key::Ctrl('S'),
            ["c", "s", "t"] => Key::Ctrl('T'),
            ["c", "s", "u"] => Key::Ctrl('U'),
            ["c", "s", "v"] => Key::Ctrl('V'),
            ["c", "s", "w"] => Key::Ctrl('W'),
            ["c", "s", "x"] => Key::Ctrl('X'),
            ["c", "s", "y"] => Key::Ctrl('Y'),
            ["c", "s", "z"] => Key::Ctrl('Z'),
            array => todo!("{:?} has no string to key implementation", array),
        }
    }
}

pub trait Display {
    fn display(&self) -> &'static str;
}

impl Display for Key {
    fn display(&self) -> &'static str {
        match self {
            Key::Esc => "<Esc>",
            Key::Null => "<Null>",
            Key::Backspace => "<Backspace>",
            Key::Left => "<Left>",
            Key::Right => "<Right>",
            Key::Up => "<Up>",
            Key::Down => "<Down>",
            Key::Home => "<Home>",
            Key::End => "<End>",
            Key::PageUp => "<PageUp>",
            Key::PageDown => "<PageDown>",
            Key::BackTab => "<BackTab>",
            Key::Delete => "<Delete>",
            Key::Insert => "<Insert>",
            Key::F(1) => "<F1>",
            Key::F(2) => "<F2>",
            Key::F(3) => "<F3>",
            Key::F(4) => "<F4>",
            Key::F(5) => "<F5>",
            Key::F(6) => "<F6>",
            Key::F(7) => "<F7>",
            Key::F(8) => "<F8>",
            Key::F(9) => "<F9>",
            Key::F(10) => "<F10>",
            Key::F(11) => "<F11>",
            Key::F(12) => "<F12>",
            Key::Char('a') => "a",
            Key::Char('b') => "b",
            Key::Char('c') => "c",
            Key::Char('d') => "d",
            Key::Char('e') => "e",
            Key::Char('f') => "f",
            Key::Char('g') => "g",
            Key::Char('h') => "h",
            Key::Char('i') => "i",
            Key::Char('j') => "j",
            Key::Char('k') => "k",
            Key::Char('l') => "l",
            Key::Char('m') => "m",
            Key::Char('n') => "n",
            Key::Char('o') => "o",
            Key::Char('p') => "p",
            Key::Char('q') => "q",
            Key::Char('r') => "r",
            Key::Char('s') => "s",
            Key::Char('t') => "t",
            Key::Char('u') => "u",
            Key::Char('v') => "v",
            Key::Char('w') => "w",
            Key::Char('x') => "x",
            Key::Char('y') => "y",
            Key::Char('z') => "z",
            Key::Char('A') => "A",
            Key::Char('B') => "B",
            Key::Char('C') => "C",
            Key::Char('D') => "D",
            Key::Char('E') => "E",
            Key::Char('F') => "F",
            Key::Char('G') => "G",
            Key::Char('H') => "H",
            Key::Char('I') => "I",
            Key::Char('J') => "J",
            Key::Char('K') => "K",
            Key::Char('L') => "L",
            Key::Char('M') => "M",
            Key::Char('N') => "N",
            Key::Char('O') => "O",
            Key::Char('P') => "P",
            Key::Char('Q') => "Q",
            Key::Char('R') => "R",
            Key::Char('S') => "S",
            Key::Char('T') => "T",
            Key::Char('U') => "U",
            Key::Char('V') => "V",
            Key::Char('W') => "W",
            Key::Char('X') => "X",
            Key::Char('Y') => "Y",
            Key::Char('Z') => "Z",
            Key::Alt('a') => "<A-a>",
            Key::Alt('b') => "<A-b>",
            Key::Alt('c') => "<A-c>",
            Key::Alt('d') => "<A-d>",
            Key::Alt('e') => "<A-e>",
            Key::Alt('f') => "<A-f>",
            Key::Alt('g') => "<A-g>",
            Key::Alt('h') => "<A-h>",
            Key::Alt('i') => "<A-i>",
            Key::Alt('j') => "<A-j>",
            Key::Alt('k') => "<A-k>",
            Key::Alt('l') => "<A-l>",
            Key::Alt('m') => "<A-m>",
            Key::Alt('n') => "<A-n>",
            Key::Alt('o') => "<A-o>",
            Key::Alt('p') => "<A-p>",
            Key::Alt('q') => "<A-q>",
            Key::Alt('r') => "<A-r>",
            Key::Alt('s') => "<A-s>",
            Key::Alt('t') => "<A-t>",
            Key::Alt('u') => "<A-u>",
            Key::Alt('v') => "<A-v>",
            Key::Alt('w') => "<A-w>",
            Key::Alt('x') => "<A-x>",
            Key::Alt('y') => "<A-y>",
            Key::Alt('z') => "<A-z>",
            Key::Alt('A') => "<A-A>",
            Key::Alt('B') => "<A-B>",
            Key::Alt('C') => "<A-C>",
            Key::Alt('D') => "<A-D>",
            Key::Alt('E') => "<A-E>",
            Key::Alt('F') => "<A-F>",
            Key::Alt('G') => "<A-G>",
            Key::Alt('H') => "<A-H>",
            Key::Alt('I') => "<A-I>",
            Key::Alt('J') => "<A-J>",
            Key::Alt('K') => "<A-K>",
            Key::Alt('L') => "<A-L>",
            Key::Alt('M') => "<A-M>",
            Key::Alt('N') => "<A-N>",
            Key::Alt('O') => "<A-O>",
            Key::Alt('P') => "<A-P>",
            Key::Alt('Q') => "<A-Q>",
            Key::Alt('R') => "<A-R>",
            Key::Alt('S') => "<A-S>",
            Key::Alt('T') => "<A-T>",
            Key::Alt('U') => "<A-U>",
            Key::Alt('V') => "<A-V>",
            Key::Alt('W') => "<A-W>",
            Key::Alt('X') => "<A-X>",
            Key::Alt('Y') => "<A-Y>",
            Key::Alt('Z') => "<A-Z>",
            Key::Ctrl('a') => "<C-a>",
            Key::Ctrl('b') => "<C-b>",
            Key::Ctrl('c') => "<C-c>",
            Key::Ctrl('d') => "<C-d>",
            Key::Ctrl('e') => "<C-e>",
            Key::Ctrl('f') => "<C-f>",
            Key::Ctrl('g') => "<C-g>",
            Key::Ctrl('h') => "<C-h>",
            Key::Ctrl('i') => "<C-i>",
            Key::Ctrl('j') => "<C-j>",
            Key::Ctrl('k') => "<C-k>",
            Key::Ctrl('l') => "<C-l>",
            Key::Ctrl('m') => "<C-m>",
            Key::Ctrl('n') => "<C-n>",
            Key::Ctrl('o') => "<C-o>",
            Key::Ctrl('p') => "<C-p>",
            Key::Ctrl('q') => "<C-q>",
            Key::Ctrl('r') => "<C-r>",
            Key::Ctrl('s') => "<C-s>",
            Key::Ctrl('t') => "<C-t>",
            Key::Ctrl('u') => "<C-u>",
            Key::Ctrl('v') => "<C-v>",
            Key::Ctrl('w') => "<C-w>",
            Key::Ctrl('x') => "<C-x>",
            Key::Ctrl('y') => "<C-y>",
            Key::Ctrl('z') => "<C-z>",
            Key::Ctrl('A') => "<C-A>",
            Key::Ctrl('B') => "<C-B>",
            Key::Ctrl('C') => "<C-C>",
            Key::Ctrl('D') => "<C-D>",
            Key::Ctrl('E') => "<C-E>",
            Key::Ctrl('F') => "<C-F>",
            Key::Ctrl('G') => "<C-G>",
            Key::Ctrl('H') => "<C-H>",
            Key::Ctrl('I') => "<C-I>",
            Key::Ctrl('J') => "<C-J>",
            Key::Ctrl('K') => "<C-K>",
            Key::Ctrl('L') => "<C-L>",
            Key::Ctrl('M') => "<C-M>",
            Key::Ctrl('N') => "<C-N>",
            Key::Ctrl('O') => "<C-O>",
            Key::Ctrl('P') => "<C-P>",
            Key::Ctrl('Q') => "<C-Q>",
            Key::Ctrl('R') => "<C-R>",
            Key::Ctrl('S') => "<C-S>",
            Key::Ctrl('T') => "<C-T>",
            Key::Ctrl('U') => "<C-U>",
            Key::Ctrl('V') => "<C-V>",
            Key::Ctrl('W') => "<C-W>",
            Key::Ctrl('X') => "<C-X>",
            Key::Ctrl('Y') => "<C-Y>",
            Key::Ctrl('Z') => "<C-Z>",
            key => todo!("{:?} has no display implementation", key),
        }
    }
}

#[cfg(test)]
mod tests {
    use termion::event::Key;
    use crate::keys::NewFromString;

    #[test]
    fn esc_from_string() {
        let key_1 = Key::new_from_string("<ESC>");
        let key_2 = Key::new_from_string("<Esc>");
        let key_3 = Key::new_from_string("<esc>");

        assert_eq!(key_1, Key::Esc);
        assert_eq!(key_2, Key::Esc);
        assert_eq!(key_3, Key::Esc);
    }
}
